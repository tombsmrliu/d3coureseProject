<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
          #d1 {
              width: 200px;
              height: 200px;
              background-color: cyan;
              position: absolute;
              left: 0;
              top: 0 ;
              border-radius: 100px;
          }
    </style>
</head>
<body>
      <div id="d1">

      </div>

      <script>

           var divElement = document.getElementById("d1");
           var hor_speed = 10 ; //横向速度
           var ver_speed = 10 ; //垂直速度
           var timer = null; //空对象
           var duration = 100 ;
           document.body.onkeydown = function () {
//                 if (event.keyCode == 39){
//                     divElement.style.left = divElement.offsetLeft + speed +"px";
//                 }
//
//                 if (event.keyCode == 37){
//                     divElement.style.left = divElement.offsetLeft - speed +"px";
//                 }
//                 if (event.keyCode == 40){
//                     divElement.style.top = divElement.offsetTop + speed + "px";
//                 }
//                 if (event.keyCode == 38){
//                     divElement.style.top = divElement.offsetTop - speed + "px";
//                 }

               switch (event.keyCode) {
                   case 37:
                       move(1,duration);
                       hor_speed = -10;
                       break; //左
                   case 38:
                       move(2,duration);
                       ver_speed = -10;
                       break; //上
                   case 39:
                       move(3,duration);
                       hor_speed = 10;
                       break;  //右
                   case 40:
                       move(4,duration);
                       ver_speed = 10;
                       break; //下
               }
           }

           function move(direction, duration) {
               clearInterval(timer);
               timer = setInterval(function () {
                       if (direction == 1 || direction == 3){

                           if (divElement.offsetLeft > document.body.clientWidth){
                               divElement.style.left = "-200px";
                           }
                           if (divElement.offsetLeft < -200){
                               divElement.style.left = document.body.clientWidth + "px";
                           }
                           divElement.style.left = divElement.offsetLeft + hor_speed + "px";
                       }

                       if (direction == 2 || direction == 4){
                           if (divElement.offsetTop > window.innerHeight){
                               divElement.style.top = "-200px";
                           }

                           if (divElement.offsetTop < -200){
                               divElement.style.top = window.innerHeight + "px";
                           }
                           divElement.style.top = divElement.offsetTop + ver_speed + "px";
                       }
               },duration);
           }

      </script>
</body>
</html>